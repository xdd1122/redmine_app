<span class="checklist-item <%= new_or_show(f) %> <%= 'checklist-section' if f.object.is_section %> existing" id="<%= f.object.id %>">
  <% unless f.object.is_section %>
    <span class="checklist-show-only checklist-checkbox"><%= f.check_box :is_done %></span>
  <% end %>

  <span class="checklist-show checklist-subject <%= done_css(f) %>">
    <%= f.object.subject.to_s.strip.gsub('<', '&lt;').gsub('>', '&gt;').html_safe %>
  </span>

  <span class="checklist-edit checklist-new checklist-edit-box">
    <%= text_field_tag nil, f.object.subject, class: 'edit-box', size: 60 %>
    <%= f.hidden_field :subject, class: 'checklist-subject-hidden' %>
  </span>

  <span class="checklist-edit-only checklist-edit-save-button">
    <%= link_to sprite_icon('save', ''), 'javascript:void(0)', class: 'icon icon-save checklist-action-link' %>
  </span>
  <span class="checklist-edit-only checklist-edit-reset-button">
    <%= link_to sprite_icon('cancel', ''), 'javascript:void(0)', class: 'icon icon-cancel checklist-action-link' %>
  </span>
  <span class="checklist-show-only checklist-remove"><%= link_to_remove_checklist_fields sprite_icon('del', ''), f, class: 'icon icon-del' %></span>

  <%= f.hidden_field :position, class: 'checklist-item-position' %>
  <%= f.hidden_field :is_section, class: 'checklist-item-is_section' %>
  <%= f.hidden_field :id, class: 'checklist-item-id' %>

  <span class="icon icon-add checklist-new-only save-new-by-button">
    <%= sprite_icon('add') %>
  </span>

 <br>
</span>
